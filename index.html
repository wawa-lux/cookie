<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cookie Chaos</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
    font-family: Arial, sans-serif;
}

html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.page {
    display: none;
    width: 100vw;
    height: 100vh;
}

/* HOME */
#home {
    background: yellow;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

#home h1 { font-size: 3rem; margin-bottom: 20px; }

.btn {
    padding: 15px 30px;
    font-size: 1.1rem;
    border: none;
    border-radius: 10px;
    margin: 8px;
    cursor: pointer;
}

.play-btn { background: blue; color: white; }
.cmd-btn { background: black; color: white; }

/* GAME */
#game {
    background: pink;
    position: relative;
    width: 100%;
    height: 100%;
}

.cookie {
    position: absolute;
    bottom: 0;
    font-size: 40px;
    pointer-events: none;
}

.huge { font-size: 70px; }
.mega { font-size: 110px; }

/* HUD */
#hud {
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(255,255,255,0.8);
    padding: 10px;
    border-radius: 10px;
    font-weight: bold;
}

/* BUTTONS */
#controls {
    position: fixed;
    bottom: 10px;
    left: 10px;
}

#controls button {
    margin: 5px;
}

/* SHAKE */
.shake {
    animation: shake 0.4s;
}

@keyframes shake {
    0% { transform: translate(0); }
    25% { transform: translate(5px, -5px); }
    50% { transform: translate(-5px, 5px); }
    75% { transform: translate(5px, 5px); }
    100% { transform: translate(0); }
}
</style>
</head>

<body>

<div id="home" class="page" style="display:flex;">
    <h1>Play with cookies now!</h1>
    <button class="btn play-btn" onclick="goGame()">Play now!</button>
</div>

<div id="game" class="page">
    <div id="hud">
        Cookies: <span id="score">0</span><br>
        Rank: <span id="rank">Beginner</span>
    </div>

    <div id="controls">
        <button class="btn" onclick="cookieBomb()">ðŸ’£ Cookie Bomb</button>
        <button class="btn" onclick="toggleChaos()">ðŸŒª Chaos Mode</button>
    </div>
</div>

<script>
const game = document.getElementById("game");
const scoreEl = document.getElementById("score");
const rankEl = document.getElementById("rank");

let score = Number(localStorage.getItem("score")) || 0;
let chaos = false;
let chaosInterval = null;

/* ===== AUDIO ===== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSound(freq=300) {
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    o.frequency.value = freq;
    o.start();
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.2);
    o.stop(audioCtx.currentTime + 0.2);
}

/* ===== FULLSCREEN ===== */
function goGame() {
    document.getElementById("home").style.display = "none";
    game.style.display = "block";
    if (document.documentElement.requestFullscreen)
        document.documentElement.requestFullscreen();
    updateHUD();
}

/* ===== COOKIE ===== */
function spawnCookie(size="normal") {
    const c = document.createElement("div");
    c.className = "cookie";
    c.innerHTML = "ðŸª";

    if (size === "huge") c.classList.add("huge");
    if (size === "mega") {
        c.classList.add("mega");
        game.classList.add("shake");
        setTimeout(()=>game.classList.remove("shake"),400);
        playSound(120);
    } else {
        playSound(300);
    }

    c.style.left = Math.random() * (window.innerWidth - 120) + "px";
    game.appendChild(c);

    score++;
    localStorage.setItem("score", score);
    updateHUD();

    if (game.children.length > 300)
        game.removeChild(game.children[1]);
}

/* ===== HUD ===== */
function updateHUD() {
    scoreEl.textContent = score;
    let rank = "Beginner";
    if (score >= 20) rank = "Pro";
    if (score >= 50) rank = "Master";
    if (score >= 100) rank = "Cookie God";
    rankEl.textContent = rank;
}

/* ===== CONTROLS ===== */
game.addEventListener("click", () => spawnCookie());

function cookieBomb() {
    for (let i=0;i<20;i++) spawnCookie();
}

function toggleChaos() {
    chaos = !chaos;
    if (chaos) {
        chaosInterval = setInterval(()=>spawnCookie(),150);
    } else {
        clearInterval(chaosInterval);
    }
}

/* LOAD */
updateHUD();
</script>

</body>
</html>

